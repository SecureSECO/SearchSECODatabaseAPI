<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SearchSECODatabaseAPI: RAFTConsensus Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SearchSECODatabaseAPI
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classRAFTConsensus.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classRAFTConsensus-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">RAFTConsensus Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:afbc47259171471981c4019e64e33c994"><td class="memItemLeft" align="right" valign="top"><a id="afbc47259171471981c4019e64e33c994" name="afbc47259171471981c4019e64e33c994"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>RAFTConsensus</b> (<a class="el" href="classStatistics.html">Statistics</a> *stats)</td></tr>
<tr class="separator:afbc47259171471981c4019e64e33c994"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2c006bcdbb3d9d1f84e4d55ad8342e5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRAFTConsensus.html#ae2c006bcdbb3d9d1f84e4d55ad8342e5">start</a> (<a class="el" href="classRequestHandler.html">RequestHandler</a> *requestHandler, std::vector&lt; std::pair&lt; std::string, std::string &gt; &gt; ips, bool assumeLeader=false)</td></tr>
<tr class="memdesc:ae2c006bcdbb3d9d1f84e4d55ad8342e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts RAFT. Will try to connect to a set list of IP's where we assume the leaders are. If none of them respond, we will assume we are the first and assume the role of leader.  <a href="classRAFTConsensus.html#ae2c006bcdbb3d9d1f84e4d55ad8342e5">More...</a><br /></td></tr>
<tr class="separator:ae2c006bcdbb3d9d1f84e4d55ad8342e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92e31bcb1e82e9e566dd4d38f2e6b048"><td class="memItemLeft" align="right" valign="top"><a id="a92e31bcb1e82e9e566dd4d38f2e6b048" name="a92e31bcb1e82e9e566dd4d38f2e6b048"></a>
virtual bool&#160;</td><td class="memItemRight" valign="bottom"><b>isLeader</b> ()</td></tr>
<tr class="memdesc:a92e31bcb1e82e9e566dd4d38f2e6b048"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if this node is the leader in the network. <br /></td></tr>
<tr class="separator:a92e31bcb1e82e9e566dd4d38f2e6b048"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a545d8f4e90d690b2b5fb81a24454ad73"><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRAFTConsensus.html#a545d8f4e90d690b2b5fb81a24454ad73">passRequestToLeader</a> (std::string requestType, std::string client, std::string request)</td></tr>
<tr class="memdesc:a545d8f4e90d690b2b5fb81a24454ad73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will pass the given request on to the leader of the network.  <a href="classRAFTConsensus.html#a545d8f4e90d690b2b5fb81a24454ad73">More...</a><br /></td></tr>
<tr class="separator:a545d8f4e90d690b2b5fb81a24454ad73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b838ff3c957e55294604be68520c05f"><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRAFTConsensus.html#a2b838ff3c957e55294604be68520c05f">connectNewNode</a> (boost::shared_ptr&lt; <a class="el" href="classTcpConnection.html">TcpConnection</a> &gt; connection, std::string request)</td></tr>
<tr class="memdesc:a2b838ff3c957e55294604be68520c05f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will handle a connect request by a new node that wants to join the network. If this node is the leader, we will add it to our list of connections. If we are not the leader, we will return the ip and port of the leader of the network.  <a href="classRAFTConsensus.html#a2b838ff3c957e55294604be68520c05f">More...</a><br /></td></tr>
<tr class="separator:a2b838ff3c957e55294604be68520c05f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bced18a10d94022b2cc67fbe7af8744"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; std::pair&lt; std::string, std::string &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRAFTConsensus.html#a2bced18a10d94022b2cc67fbe7af8744">getIps</a> (std::string file=&quot;.env&quot;)</td></tr>
<tr class="memdesc:a2bced18a10d94022b2cc67fbe7af8744"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the given file and gets the ips out of it.  <a href="classRAFTConsensus.html#a2bced18a10d94022b2cc67fbe7af8744">More...</a><br /></td></tr>
<tr class="separator:a2bced18a10d94022b2cc67fbe7af8744"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af65edcd4c78fa83824b1cd45753f853b"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRAFTConsensus.html#af65edcd4c78fa83824b1cd45753f853b">getCurrentIPs</a> ()</td></tr>
<tr class="memdesc:af65edcd4c78fa83824b1cd45753f853b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the ips currently know to this api.  <a href="classRAFTConsensus.html#af65edcd4c78fa83824b1cd45753f853b">More...</a><br /></td></tr>
<tr class="separator:af65edcd4c78fa83824b1cd45753f853b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82d93ab476424a745bd918a888af5259"><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRAFTConsensus.html#a82d93ab476424a745bd918a888af5259">getMyIP</a> ()</td></tr>
<tr class="memdesc:a82d93ab476424a745bd918a888af5259"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the ip of this node.  <a href="classRAFTConsensus.html#a82d93ab476424a745bd918a888af5259">More...</a><br /></td></tr>
<tr class="separator:a82d93ab476424a745bd918a888af5259"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2b838ff3c957e55294604be68520c05f" name="a2b838ff3c957e55294604be68520c05f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b838ff3c957e55294604be68520c05f">&#9670;&nbsp;</a></span>connectNewNode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string RAFTConsensus::connectNewNode </td>
          <td>(</td>
          <td class="paramtype">boost::shared_ptr&lt; <a class="el" href="classTcpConnection.html">TcpConnection</a> &gt;&#160;</td>
          <td class="paramname"><em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>request</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Will handle a connect request by a new node that wants to join the network. If this node is the leader, we will add it to our list of connections. If we are not the leader, we will return the ip and port of the leader of the network. </p>
<dl class="section return"><dt>Returns</dt><dd>If we are the leader, we will return ok and the initial data. If we are not the leader, we will return the leader of the network. </dd></dl>

</div>
</div>
<a id="af65edcd4c78fa83824b1cd45753f853b" name="af65edcd4c78fa83824b1cd45753f853b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af65edcd4c78fa83824b1cd45753f853b">&#9670;&nbsp;</a></span>getCurrentIPs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::string &gt; RAFTConsensus::getCurrentIPs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the ips currently know to this api. </p>
<dl class="section return"><dt>Returns</dt><dd>List of ips with port. </dd></dl>

</div>
</div>
<a id="a2bced18a10d94022b2cc67fbe7af8744" name="a2bced18a10d94022b2cc67fbe7af8744"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bced18a10d94022b2cc67fbe7af8744">&#9670;&nbsp;</a></span>getIps()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::pair&lt; std::string, std::string &gt; &gt; RAFTConsensus::getIps </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>file</em> = <code>&quot;.env&quot;</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads the given file and gets the ips out of it. </p>
<dl class="section return"><dt>Returns</dt><dd>List of ips with port. </dd></dl>

</div>
</div>
<a id="a82d93ab476424a745bd918a888af5259" name="a82d93ab476424a745bd918a888af5259"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82d93ab476424a745bd918a888af5259">&#9670;&nbsp;</a></span>getMyIP()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::string RAFTConsensus::getMyIP </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the ip of this node. </p>
<dl class="section return"><dt>Returns</dt><dd>The own ip address. </dd></dl>

</div>
</div>
<a id="a545d8f4e90d690b2b5fb81a24454ad73" name="a545d8f4e90d690b2b5fb81a24454ad73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a545d8f4e90d690b2b5fb81a24454ad73">&#9670;&nbsp;</a></span>passRequestToLeader()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string RAFTConsensus::passRequestToLeader </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>requestType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>request</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Will pass the given request on to the leader of the network. </p>
<dl class="section return"><dt>Returns</dt><dd>The string that the leader gives back. </dd></dl>

</div>
</div>
<a id="ae2c006bcdbb3d9d1f84e4d55ad8342e5" name="ae2c006bcdbb3d9d1f84e4d55ad8342e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2c006bcdbb3d9d1f84e4d55ad8342e5">&#9670;&nbsp;</a></span>start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RAFTConsensus::start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRequestHandler.html">RequestHandler</a> *&#160;</td>
          <td class="paramname"><em>requestHandler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::pair&lt; std::string, std::string &gt; &gt;&#160;</td>
          <td class="paramname"><em>ips</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>assumeLeader</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts RAFT. Will try to connect to a set list of IP's where we assume the leaders are. If none of them respond, we will assume we are the first and assume the role of leader. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">assumeLeader</td><td>If set to true, will skip the connect phase and assume that this node is the leader. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>SearchSECODatabaseAPI/JobDistribution/<a class="el" href="RAFTConsensus_8h_source.html">RAFTConsensus.h</a></li>
<li>SearchSECODatabaseAPI/JobDistribution/RAFTConsensus.cpp</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classRAFTConsensus.html">RAFTConsensus</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
